(function(){"use strict";var t={676:function(t,e,n){var a=n(751),i=n(641);function r(t,e,n,a,r,l){const u=(0,i.g2)("AuditList");return(0,i.uX)(),(0,i.Wv)(u)}var l=n(33);const u={key:0},o=(0,i.Fv)('<div class="btn-group btn-group-sm"><button type="button" class="btn btn-light">All</button><button type="button" class="btn btn-light">Past Due</button><button type="button" class="btn btn-light">Current</button><button type="button" class="btn btn-light">Future Dated</button></div>',1),s={class:"table table-hover"},c=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Aduit"),(0,i.Lk)("th",null,"Start Date"),(0,i.Lk)("th",null,"Due Date"),(0,i.Lk)("th",null,"Frequency"),(0,i.Lk)("th",null,"Options")])],-1),d=["onClick"],f={key:0},p={key:1},h=["href"],g=(0,i.Lk)("span",{class:"material-icons"},"edit",-1),b=[g],v=["onClick"],k=(0,i.Lk)("span",{class:"material-icons"},"delete",-1),m=[k],y=(0,i.Fv)('<ul class="pagination justify-content-center"><li class="page-item"><a class="page-link" href="#">Prev</a></li><li class="page-item"><a class="page-link" href="#">1</a></li><li class="page-item"><a class="page-link" href="#">2</a></li><li class="page-item"><a class="page-link" href="#">3</a></li><li class="page-item"><a class="page-link" href="#">Next</a></li></ul>',1);function L(t,e,n,a,r,g){return r.audits&&r.audits.length?((0,i.uX)(),(0,i.CE)("div",u,[o,(0,i.Lk)("table",s,[c,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.audits,((t,e)=>((0,i.uX)(),(0,i.CE)("tr",{key:e,onClick:e=>g.redirectToAudit(t.audit_type.name),class:(0,l.C4)({"table-danger":new Date(t.due_date)<new Date,"table-info":new Date(t.start_date)>new Date})},[0===t.client||1===t.client?((0,i.uX)(),(0,i.CE)("td",f,(0,l.v_)(t.audit_type.name),1)):((0,i.uX)(),(0,i.CE)("td",p,(0,l.v_)(t.client_value)+" "+(0,l.v_)(t.audit_type.name),1)),(0,i.Lk)("td",null,(0,l.v_)(g.formatDate(t.start_date)),1),(0,i.Lk)("td",null,(0,l.v_)(g.formatDate(t.due_date)),1),(0,i.Lk)("td",null,(0,l.v_)(t.audit_type.frequency),1),(0,i.Lk)("td",null,[(0,i.Lk)("a",{class:"btn btn-light btn-sm edit-link",href:g.getEditAuditURL(t.id)},b,8,h),(0,i.Lk)("button",{class:"btn btn-light btn-sm delete-link",onClick:e=>g.confirmDeleteAudit(e,t.id)},m,8,v)])],10,d)))),128))])]),y])):(0,i.Q3)("",!0)}var w=n(250),A={name:"AuditList",data(){return{audits:[],today:null,page:1,pageSize:20,totalAudits:0}},created(){this.fetchAudits(),this.today=new Date},computed:{totalPages(){return Math.ceil(this.totalAudits/this.pageSize)}},methods:{async fetchAudits(){try{const t=await w.A.get("http://localhost:8000/riskmanagement/api/audits/",{params:{page:this.page,page_size:this.pageSize}});this.audits=t.data.results,this.totalAudits=t.data.count}catch(t){console.error("Error fetching data: ",t)}},formatDate(t){const e=new Date(t),n=`${e.getMonth()+1}-${e.getDate()}-${e.getFullYear()}`;return n},getEditAuditURL(t){return`/riskmanagement/edit_audit/${t}/`},async confirmDeleteAudit(t,e){t.preventDefault,confirm("Are you sure you want to delete this audit?")&&(window.location.href=`/riskmanagement/delete_audit/${e}/`)},redirectToAudit(t){const e=t.toLowerCase().replace(/ /g,"_");console.log(e);const n=`/riskmanagement/${e}/`;window.location.href=n}}},_=n(262);const D=(0,_.A)(A,[["render",L]]);var C=D,O={name:"App",components:{AuditList:C}};const E=(0,_.A)(O,[["render",r]]);var j=E;(0,a.Ef)(j).mount("#app")}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,a,i,r){if(!a){var l=1/0;for(c=0;c<t.length;c++){a=t[c][0],i=t[c][1],r=t[c][2];for(var u=!0,o=0;o<a.length;o++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](a[o])}))?a.splice(o--,1):(u=!1,r<l&&(l=r));if(u){t.splice(c--,1);var s=i();void 0!==s&&(e=s)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[a,i,r]}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,l=a[0],u=a[1],o=a[2],s=0;if(l.some((function(e){return 0!==t[e]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(o)var c=o(n)}for(e&&e(a);s<l.length;s++)r=l[s],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},a=self["webpackChunkvue"]=self["webpackChunkvue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(676)}));a=n.O(a)})();
//# sourceMappingURL=app.792f94ec.js.map